% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/estimate_tmle.R
\name{estimate_tmle}
\alias{estimate_tmle}
\title{Estimate Causal Effects via Targeted Maximum Likelihood Estimation (TMLE)}
\usage{
estimate_tmle(
  obj,
  regime = NULL,
  times = NULL,
  inference = "eif",
  ci_level = 0.95,
  n_boot = 200L,
  g_bounds = c(0.01, 1),
  outcome_range = NULL,
  risk_set = "all",
  verbose = TRUE
)
}
\arguments{
\item{obj}{A \code{longy_data} object with treatment, censoring (if
applicable), and outcome models already fit.}

\item{regime}{Character. Name of the regime.}

\item{times}{Numeric vector. Time points at which to estimate. If NULL,
estimates at all time points.}

\item{inference}{Character. Inference method: \code{"eif"} (default,
efficient influence function), \code{"bootstrap"}, or \code{"none"}.}

\item{ci_level}{Numeric. Confidence level (default 0.95).}

\item{n_boot}{Integer. Number of bootstrap replicates (only for
\code{"bootstrap"}).}

\item{g_bounds}{Numeric vector of length 2. Bounds for cumulative g
(denominator of clever covariate). Default \code{c(0.01, 1)}.}

\item{outcome_range}{Numeric vector of length 2. Range for scaling
continuous outcomes to \code{[0,1]}. If NULL, uses empirical range.
Ignored for binary/survival outcomes.}

\item{risk_set}{Character. Which subjects form the training set for Q
models at each backward step. \code{"all"} (default) uses all uncensored
subjects. \code{"followers"} restricts to regime-followers, matching
\code{fit_outcome(risk_set = "followers")}.}

\item{verbose}{Logical. Print progress.}
}
\value{
An S3 object of class \code{"longy_result"} with elements:
\describe{
\item{estimates}{data.table with time, estimate, se, ci_lower, ci_upper,
n_effective, n_at_risk}
\item{regime}{Name of the regime}
\item{estimator}{\code{"tmle"}}
\item{inference}{Inference method used}
\item{ci_level}{Confidence level}
}
}
\description{
Computes the TMLE estimator at each requested time point. TMLE combines
outcome regression (G-comp/ICE backward pass) with a targeting step using
the treatment/censoring model predictions (clever covariate). The result is
doubly robust: consistent if either the outcome model OR the nuisance models
are correctly specified. Inference uses the efficient influence function (EIF).
}

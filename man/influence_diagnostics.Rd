% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/diagnostics.R
\name{influence_diagnostics}
\alias{influence_diagnostics}
\title{Influence Diagnostics: Decompose Adjusted vs Unadjusted Estimates}
\usage{
influence_diagnostics(obj, regime = NULL, times = NULL, n_quantiles = 5L)
}
\arguments{
\item{obj}{A \code{longy_data} object with at least one estimator run.}

\item{regime}{Character. Regime name. If NULL, uses the first available.}

\item{times}{Numeric vector. Time points to include. If NULL, all available.}

\item{n_quantiles}{Integer. Number of weight groups for the summary
(default 5 = quintiles).}
}
\value{
A list of class \code{"longy_influence_diag"} with elements:
\describe{
\item{subject_dt}{Per-subject-time data.table with columns: id, time,
outcome, weight, Q_hat, p_a, marg_a, weight_group}
\item{summary_dt}{Summary by weight group and time: n, mean_outcome,
mean_weight, mean_p_a, weighted_contribution, mean_Q_hat}
\item{time_summary}{Per-time-point comparison of unadjusted mean,
IPW estimate, G-comp estimate, and weight-outcome correlation}
\item{regime}{Regime name}
}
}
\description{
Creates a per-subject-time data.table that merges outcomes, IPW weights,
G-comp counterfactual predictions, and propensity scores. Useful for
understanding why adjusted estimates differ from unadjusted means.
}
\details{
For each time point, subjects are grouped by weight quintile. The summary
shows how the outcome distribution varies across weight groups, revealing
whether high-weight subjects have systematically different outcomes.
}

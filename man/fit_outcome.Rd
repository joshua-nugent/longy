% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit_outcome.R
\name{fit_outcome}
\alias{fit_outcome}
\title{Fit Outcome Regression Models via Iterated Conditional Expectations (ICE)}
\usage{
fit_outcome(
  obj,
  regime = NULL,
  covariates = NULL,
  learners = NULL,
  sl_control = list(),
  adaptive_cv = TRUE,
  min_obs = 50L,
  bounds = c(0.005, 0.995),
  times = NULL,
  sl_fn = "SuperLearner",
  verbose = TRUE
)
}
\arguments{
\item{obj}{A \code{longy_data} object with at least one regime defined.}

\item{regime}{Character. Name of the regime to fit for.}

\item{covariates}{Character vector. Column names to use as predictors.
If NULL, uses all baseline + timevarying covariates.}

\item{learners}{Character vector. SuperLearner library names.
If NULL, uses glm only.}

\item{sl_control}{List. Additional arguments passed to SuperLearner.}

\item{adaptive_cv}{Logical. Use adaptive CV fold selection based on effective
sample size.}

\item{min_obs}{Integer. Minimum observations to fit a model; below this
threshold, uses marginal mean.}

\item{bounds}{Numeric vector of length 2. Bounds for predicted probabilities
(only applied for binary/survival outcomes).}

\item{times}{Numeric vector. If provided, only fit models for these target
times. Saves computation when estimation is only needed at specific
time points.}

\item{sl_fn}{Character. SuperLearner implementation: \code{"SuperLearner"}
(default) or \code{"ffSL"} (future-factorial parallel).}

\item{verbose}{Logical. Print progress.}
}
\value{
Modified \code{longy_data} object with outcome fits stored in
\code{obj$fits$outcome}.
}
\description{
For each target time T, runs a backward sequential regression from T to the
earliest time. At each step s, a model is fit for the pseudo-outcome Q
(initially Y_T, then predictions from s+1) on uncensored subjects through s.
Counterfactual predictions are obtained by setting A to the regime value.
The final estimate is mean(Q_hat_0) for each target T.
}
